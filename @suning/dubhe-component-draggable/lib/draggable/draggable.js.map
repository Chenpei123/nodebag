{"version":3,"sources":["../../src/draggable/draggable.js"],"names":["app","service","scope","inputEvent","event","angular","isDefined","touches","originalEvent","directive","$rootScope","$parse","$interval","$document","$window","snDraggable","restrict","link","element","attrs","value","snDrag","offset","_centerAnchor","_mx","_my","_tx","_ty","_mrx","_mry","_ox","_oy","_hasTouch","window","DocumentTouch","document","_pressEvents","_moveEvents","_releaseEvents","_dragHandle","_style","_myid","$id","_data","_dragOffset","_dragEnabled","_pressTimer","onDragStartCallback","snDragStart","onDragStopCallback","snDragStop","onDragSuccessCallback","snDragSuccess","getDragData","snDragData","_deregisterRootMoveListener","noop","initialize","attr","querySelectorAll","dragHandles","find","length","toggleListeners","enable","$on","onDestroy","$watch","onEnableChange","snCenterAnchor","onCenterAnchor","on","onpress","nodeName","toLowerCase","newVal","oldVal","isClickableElement","evt","target","type","button","cancelPress","setTimeout","onlongpress","clearTimeout","off","preventDefault","getBoundingClientRect","left","body","scrollLeft","top","scrollTop","centerX","offsetWidth","centerY","offsetHeight","pageX","pageY","pageXOffset","pageYOffset","css","width","style","position","onmove","onrelease","origEvent","hasClass","addClass","$broadcast","x","y","tx","ty","data","$apply","$data","$event","moveElement","uid","dragOffset","ox","oy","callback","onDragComplete","removeClass","parent","ele","isDropEle","getAttribute","parentElement","$timeout","snDrop","isTouching","_lastDropTouch","_dropEnabled","onDropCallback","snDropSuccess","onDragMoveCallback","snDragMove","onDragStart","onDragMove","onDragEnd","obj","updateDragStyles","hasReset","reset","$element","$target","$eval","Math","abs","isDelay","cloneEles","$","hide","totalCount","stepX","stepY","count","mouseX","mouseY","dragElement","touching","hitTest","bounds","documentElement","right","bottom","img","_allowClone","clonedData","preventContextMenu","absorbEvent_","elm","allowClone","show","e","stopPropagation","cancelBubble","returnValue","intervalPromise","lastMouseEvent","config","verticalScroll","horizontalScroll","activationDistance","scrollDistance","reqAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","animationIsOn","createInterval","nextFrame","args","Array","prototype","slice","call","arguments","apply","viewportWidth","max","clientWidth","innerWidth","viewportHeight","clientHeight","innerHeight","scrollX","scrollY","clientX","clientY","currentScrollLeft","currentScrollTop","elementTransform","scrollBy","horizontalScrollAmount","verticalScrollAmount","$emit","clearInterval"],"mappings":"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","file":"draggable.js","sourcesContent":["import './draggable.css';\r\n\r\nexport default app => {\r\n    app.service('snDraggable', [function () {\r\n        var scope = this;\r\n        scope.inputEvent = function (event) {\r\n            if (angular.isDefined(event.touches)) {\r\n                return event.touches[0];\r\n            }\r\n            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n                return event.originalEvent.touches[0];\r\n            }\r\n            return event;\r\n        };\r\n    }])\r\n        .directive('snDrag', ['$rootScope', '$parse', '$interval', '$document', '$window', 'snDraggable', function ($rootScope, $parse, $interval, $document, $window, snDraggable) {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    scope.value = attrs.snDrag;\r\n                    var offset, _centerAnchor = false, _mx, _my, _tx, _ty, _mrx, _mry, _ox, _oy;\r\n                    var _hasTouch = ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;\r\n                    var _pressEvents = 'touchstart mousedown';\r\n                    var _moveEvents = 'touchmove mousemove';\r\n                    var _releaseEvents = 'touchend mouseup';\r\n                    var _dragHandle;\r\n                    var _style;\r\n\r\n                    // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n                    var _myid = scope.$id;\r\n                    var _data = null;\r\n\r\n                    var _dragOffset = null;\r\n\r\n                    var _dragEnabled = false;\r\n\r\n                    var _pressTimer = null;\r\n\r\n                    var onDragStartCallback = $parse(attrs.snDragStart) || null;\r\n                    var onDragStopCallback = $parse(attrs.snDragStop) || null;\r\n                    var onDragSuccessCallback = $parse(attrs.snDragSuccess) || null;\r\n\r\n                    var getDragData = $parse(attrs.snDragData);\r\n\r\n                    // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n                    var _deregisterRootMoveListener = angular.noop;\r\n\r\n                    var initialize = function () {\r\n                        element.attr('draggable', 'false'); // prevent native drag\r\n                        // check to see if drag handle(s) was specified\r\n                        // if querySelectorAll is available, we use this instead of find\r\n                        // as JQLite find is limited to tagnames\r\n                        if (element[0].querySelectorAll) {\r\n                            var dragHandles = angular.element(element[0].querySelectorAll('[sn-drag-handle]'));\r\n                        } else {\r\n                            var dragHandles = element.find('[sn-drag-handle]');\r\n                        }\r\n                        if (dragHandles.length) {\r\n                            _dragHandle = dragHandles;\r\n                        }\r\n                        toggleListeners(true);\r\n                    };\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        if (!enable) return;\r\n                        // add listeners.\r\n\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$watch(attrs.snDrag, onEnableChange);\r\n                        scope.$watch(attrs.snCenterAnchor, onCenterAnchor);\r\n                        // wire up touch events\r\n                        if (_dragHandle) {\r\n                            // handle(s) specified, use those to initiate drag\r\n                            _dragHandle.on(_pressEvents, onpress);\r\n                        } else {\r\n                            // no handle(s) specified, use the element as the handle\r\n                            element.on(_pressEvents, onpress);\r\n                        }\r\n                        if (!_hasTouch && element[0].nodeName.toLowerCase() == \"img\") {\r\n                            element.on('mousedown', function () { return false; }); // prevent native drag for images\r\n                        }\r\n                    };\r\n                    var onDestroy = function (enable) {\r\n                        toggleListeners(false);\r\n                    };\r\n                    var onEnableChange = function (newVal, oldVal) {\r\n                        _dragEnabled = (newVal);\r\n                    };\r\n                    var onCenterAnchor = function (newVal, oldVal) {\r\n                        if (angular.isDefined(newVal))\r\n                            _centerAnchor = (newVal || 'true');\r\n                    };\r\n\r\n                    var isClickableElement = function (evt) {\r\n                        return (\r\n                            angular.isDefined(angular.element(evt.target).attr(\"sn-cancel-drag\"))\r\n                        );\r\n                    };\r\n                    /*\r\n                     * When the element is clicked start the drag behaviour\r\n                     * On touch devices as a small delay so as not to prevent native window scrolling\r\n                     */\r\n                    var onpress = function (evt) {\r\n                        if (!_dragEnabled) return;\r\n\r\n                        if (isClickableElement(evt)) {\r\n                            return;\r\n                        }\r\n\r\n                        if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                            // Do not start dragging on right-click\r\n                            return;\r\n                        }\r\n\r\n                        if (_hasTouch) {\r\n                            cancelPress();\r\n                            _pressTimer = setTimeout(function () {\r\n                                cancelPress();\r\n                                onlongpress(evt);\r\n                            }, 100);\r\n                            $document.on(_moveEvents, cancelPress);\r\n                            $document.on(_releaseEvents, cancelPress);\r\n                        } else {\r\n                            onlongpress(evt);\r\n                        }\r\n\r\n                    };\r\n\r\n                    var cancelPress = function () {\r\n                        clearTimeout(_pressTimer);\r\n                        $document.off(_moveEvents, cancelPress);\r\n                        $document.off(_releaseEvents, cancelPress);\r\n                    };\r\n\r\n                    var onlongpress = function (evt) {\r\n                        if (!_dragEnabled) return;\r\n                        evt.preventDefault();\r\n\r\n                        offset = element[0].getBoundingClientRect();\r\n                        _dragOffset = { left: document.body.scrollLeft, top: document.body.scrollTop };\r\n\r\n\r\n                        element.centerX = element[0].offsetWidth / 2;\r\n                        element.centerY = element[0].offsetHeight / 2;\r\n\r\n                        _mx = snDraggable.inputEvent(evt).pageX;//snDraggable.getEventProp(evt, 'pageX');\r\n                        _my = snDraggable.inputEvent(evt).pageY;//snDraggable.getEventProp(evt, 'pageY');\r\n                        _mrx = _mx - offset.left;\r\n                        _mry = _my - offset.top;\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - $window.pageXOffset;\r\n                            _ty = _my - element.centerY - $window.pageYOffset;\r\n                        } else {\r\n                            _tx = _mx - _mrx - $window.pageXOffset;\r\n                            _ty = _my - _mry - $window.pageYOffset;\r\n                        }\r\n                        _ox = _ox || _tx;\r\n                        _oy = _oy || _ty;\r\n                        _style = _style || {\r\n                            left: element.css('left'),\r\n                            top: element.css('top'),\r\n                            width: element[0].style.width,\r\n                            position: element.css('position')\r\n                        };\r\n                        element.width(element.width());\r\n\r\n                        $document.on(_moveEvents, onmove);\r\n                        $document.on(_releaseEvents, onrelease);\r\n                        // This event is used to receive manually triggered mouse move events\r\n                        // jqLite unfortunately only supports triggerHandler(...)\r\n                        // See http://api.jquery.com/triggerHandler/\r\n                        // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n                        _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function (event, origEvent) {\r\n                            onmove(origEvent);\r\n                        });\r\n                    };\r\n\r\n                    var onmove = function (evt) {\r\n                        if (!_dragEnabled) return;\r\n                        evt.preventDefault();\r\n\r\n                        if (!element.hasClass('dragging')) {\r\n                            _data = getDragData(scope);\r\n                            element.addClass('dragging');\r\n                            $rootScope.$broadcast('draggable:start', { x: _mx, y: _my, tx: _tx, ty: _ty, style: _style, event: evt, element: element, data: _data });\r\n\r\n                            if (onDragStartCallback) {\r\n                                scope.$apply(function () {\r\n                                    onDragStartCallback(scope, { $data: _data, $event: evt });\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        _mx = snDraggable.inputEvent(evt).pageX;//snDraggable.getEventProp(evt, 'pageX');\r\n                        _my = snDraggable.inputEvent(evt).pageY;//snDraggable.getEventProp(evt, 'pageY');\r\n\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - _dragOffset.left;\r\n                            _ty = _my - element.centerY - _dragOffset.top;\r\n                        } else {\r\n                            _tx = _mx - _mrx - _dragOffset.left;\r\n                            _ty = _my - _mry - _dragOffset.top;\r\n                        }\r\n                        _ox = _ox || _tx;\r\n                        _oy = _oy || _ty;\r\n\r\n                        moveElement(_tx, _ty);\r\n\r\n                        $rootScope.$broadcast('draggable:move', { x: _mx, y: _my, tx: _tx, ty: _ty, style: _style, event: evt, element: element, data: _data, uid: _myid, dragOffset: _dragOffset });\r\n                    };\r\n\r\n                    var onrelease = function (evt) {\r\n                        if (!_dragEnabled)\r\n                            return;\r\n                        evt.preventDefault();\r\n                        $rootScope.$broadcast('draggable:end', { x: _mx, y: _my, tx: _tx, ty: _ty, ox: _ox, oy: _oy, style: _style, event: evt, element: element, data: _data, callback: onDragComplete, uid: _myid });\r\n                        element.removeClass('dragging');\r\n                        element.parent().find('.drag-enter').removeClass('drag-enter');\r\n                        $document.off(_moveEvents, onmove);\r\n                        $document.off(_releaseEvents, onrelease);\r\n\r\n                        if (onDragStopCallback) {\r\n                            scope.$apply(function () {\r\n                                onDragStopCallback(scope, { $data: _data, $event: evt });\r\n                            });\r\n                        }\r\n\r\n                        var ele = evt.target;\r\n                        var isDropEle = ele.getAttribute('sn-drop') == 'true';\r\n                        while (ele.parentElement) {\r\n                            if (isDropEle) {\r\n                                break;\r\n                            }\r\n                            ele = ele.parentElement;\r\n                            isDropEle = ele.getAttribute('sn-drop') == 'true';\r\n                        };\r\n                        _ox = _oy = null;\r\n\r\n                        _deregisterRootMoveListener();\r\n                    };\r\n\r\n                    var onDragComplete = function (evt) {\r\n\r\n\r\n                        if (!onDragSuccessCallback) return;\r\n\r\n                        scope.$apply(function () {\r\n                            onDragSuccessCallback(scope, { $data: _data, $event: evt });\r\n                        });\r\n                    };\r\n\r\n                    var moveElement = function (x, y) {\r\n                        element.css({ 'left': x + 'px', 'top': y + 'px', 'position': 'fixed' });\r\n                    };\r\n                    initialize();\r\n                }\r\n            };\r\n        }])\r\n\r\n        .directive('snDrop', ['$parse', '$timeout', '$interval', '$window', '$document', 'snDraggable', function ($parse, $timeout, $interval, $window, $document, snDraggable) {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    scope.value = attrs.snDrop;\r\n                    scope.isTouching = false;\r\n\r\n                    var _lastDropTouch = null;\r\n\r\n                    var _myid = scope.$id;\r\n\r\n                    var _dropEnabled = false;\r\n\r\n                    var onDropCallback = $parse(attrs.snDropSuccess);// || function(){};\r\n\r\n                    var onDragStartCallback = $parse(attrs.snDragStart);\r\n                    var onDragStopCallback = $parse(attrs.snDragStop);\r\n                    var onDragMoveCallback = $parse(attrs.snDragMove);\r\n\r\n                    var initialize = function () {\r\n                        toggleListeners(true);\r\n                    };\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        // remove listeners\r\n\r\n                        if (!enable) return;\r\n                        // add listeners.\r\n                        scope.$watch(attrs.snDrop, onEnableChange);\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$on('draggable:start', onDragStart);\r\n                        scope.$on('draggable:move', onDragMove);\r\n                        scope.$on('draggable:end', onDragEnd);\r\n                    };\r\n\r\n                    var onDestroy = function (enable) {\r\n                        toggleListeners(false);\r\n                    };\r\n                    var onEnableChange = function (newVal, oldVal) {\r\n                        _dropEnabled = newVal;\r\n                    };\r\n                    var onDragStart = function (evt, obj) {\r\n                        if (!_dropEnabled) return;\r\n                        isTouching(obj.x, obj.y, obj.element);\r\n\r\n                        if (attrs.snDragStart) {\r\n                            $timeout(function () {\r\n                                onDragStartCallback(scope, { $data: obj.data, $event: obj });\r\n                            });\r\n                        }\r\n                    };\r\n                    var onDragMove = function (evt, obj) {\r\n                        if (!_dropEnabled) return;\r\n                        isTouching(obj.x, obj.y, obj.element);\r\n\r\n                        if (attrs.snDragMove) {\r\n                            $timeout(function () {\r\n                                onDragMoveCallback(scope, { $data: obj.data, $event: obj });\r\n                            });\r\n                        }\r\n                    };\r\n\r\n                    var onDragEnd = function (evt, obj) {\r\n\r\n                        // don't listen to drop events if this is the element being dragged\r\n                        // only update the styles and return\r\n                        if (!_dropEnabled || _myid === obj.uid) {\r\n                            updateDragStyles(false, obj.element);\r\n                            return;\r\n                        }\r\n                        if (isTouching(obj.x, obj.y, obj.element)) {\r\n                            // call the snDraggable snDragSuccess element callback\r\n                            if (obj.callback) {\r\n                                obj.callback(obj);\r\n                            }\r\n\r\n                            if (attrs.snDropSuccess) {\r\n                                obj.hasReset = true;\r\n                                reset(obj, false);\r\n                                obj.element = element;\r\n                                $timeout(function () {\r\n                                    onDropCallback(scope, { $data: obj.data, $event: obj, $element: element, $target: scope.$eval(scope.value) });\r\n                                });\r\n                            }\r\n\r\n                            if (element[0] == document.body) {\r\n                                $timeout(function () {\r\n                                    if (!obj.hasReset) {\r\n                                        reset(obj, (Math.abs(obj.ox - obj.tx) + Math.abs(obj.oy - obj.ty)) > 10);\r\n                                    }\r\n                                }, 0);\r\n                            }\r\n                        }\r\n\r\n                        if (attrs.snDragStop) {\r\n                            $timeout(function () {\r\n                                onDragStopCallback(scope, { $data: obj.data, $event: obj });\r\n                            });\r\n                        }\r\n\r\n                        updateDragStyles(false, obj.element);\r\n                    };\r\n\r\n                    var reset = function (obj, isDelay) {\r\n                        var element = obj.element;\r\n                        var cloneEles = $('[sn-drag-clone]');\r\n                        if (isDelay) {\r\n                            $timeout(function () {\r\n                                cloneEles.hide();\r\n                            }, 500);\r\n                        } else {\r\n                            cloneEles.hide();\r\n                        }\r\n                        if (isDelay) {\r\n                            var totalCount = 25;\r\n                            var tx = obj.tx;\r\n                            var ty = obj.ty;\r\n                            var ox = obj.ox;\r\n                            var oy = obj.oy;\r\n                            var stepX = (tx - ox) / totalCount;\r\n                            var stepY = (ty - oy) / totalCount;\r\n                            $interval(function (count) {\r\n                                tx = tx - stepX;\r\n                                ty = ty - stepY;\r\n                                element.css({ 'left': tx + 'px', 'top': ty + 'px', 'position': 'fixed' });\r\n                                count == totalCount && element.css({ 'left': obj.style.left, 'top': obj.style.top, 'position': obj.style.position });\r\n                            }, 20, totalCount, false);\r\n                        } else {\r\n                            element.css({ 'left': obj.style.left, 'top': obj.style.top, 'position': obj.style.position });\r\n                        }\r\n                        element.css('width', obj.style.width);\r\n                    };\r\n\r\n                    var isTouching = function (mouseX, mouseY, dragElement) {\r\n                        var touching = hitTest(mouseX, mouseY);\r\n                        scope.isTouching = touching;\r\n                        if (touching) {\r\n                            _lastDropTouch = element;\r\n                        }\r\n                        updateDragStyles(touching, dragElement);\r\n                        return touching;\r\n                    };\r\n\r\n                    var updateDragStyles = function (touching, dragElement) {\r\n                        if (touching) {\r\n                            element.addClass('drag-enter');\r\n                            dragElement.addClass('drag-over');\r\n                        } else if (_lastDropTouch == element) {\r\n                            _lastDropTouch = null;\r\n                            element.removeClass('drag-enter');\r\n                            dragElement.removeClass('drag-over');\r\n                        }\r\n                    };\r\n\r\n                    var hitTest = function (x, y) {\r\n                        var bounds = element[0].getBoundingClientRect();// snDraggable.getPrivOffset(element);\r\n                        x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;\r\n                        y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;\r\n                        return x >= bounds.left\r\n                            && x <= bounds.right\r\n                            && y <= bounds.bottom\r\n                            && y >= bounds.top;\r\n                    };\r\n\r\n                    initialize();\r\n                }\r\n            };\r\n        }])\r\n        .directive('snDragClone', ['$parse', '$timeout', 'snDraggable', function ($parse, $timeout, snDraggable) {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    var img, _allowClone = true;\r\n                    var _dragOffset = null;\r\n                    var _tx;\r\n                    var _ty;\r\n                    scope.clonedData = {};\r\n                    var initialize = function () {\r\n\r\n                        img = element.find('img');\r\n                        element.attr('draggable', 'false');\r\n                        img.attr('draggable', 'false');\r\n                        toggleListeners(true);\r\n                    };\r\n\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        // remove listeners\r\n\r\n                        if (!enable) return;\r\n                        // add listeners.\r\n                        scope.$on('draggable:start', onDragStart);\r\n                        scope.$on('draggable:move', onDragMove);\r\n                        scope.$on('draggable:end', onDragEnd);\r\n                        preventContextMenu();\r\n\r\n                    };\r\n                    var preventContextMenu = function () {\r\n                        //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                        img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                        //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                        img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                    };\r\n                    var onDragStart = function (evt, obj, elm) {\r\n                        _allowClone = true;\r\n                        if (angular.isDefined(obj.data.allowClone)) {\r\n                            _allowClone = obj.data.allowClone;\r\n                        }\r\n                        if (_allowClone) {\r\n                            scope.$apply(function () {\r\n                                scope.clonedData = obj.data;\r\n                            });\r\n                            element.css('width', obj.element[0].offsetWidth);\r\n                            element.css('height', obj.element[0].offsetHeight);\r\n\r\n                            moveElement(obj.tx, obj.ty);\r\n                            element.show();\r\n                        }\r\n\r\n                    };\r\n                    var onDragMove = function (evt, obj) {\r\n                        if (_allowClone) { }\r\n                    };\r\n                    var onDragEnd = function (evt, obj) {\r\n                        //moveElement(obj.tx,obj.ty);\r\n                        if (_allowClone) {\r\n                            var ele = obj.event.target;\r\n                            var isDropEle = ele.getAttribute('sn-drop') == 'true';\r\n                            while (ele.parentElement) {\r\n                                if (isDropEle) {\r\n                                    break;\r\n                                }\r\n                                ele = ele.parentElement;\r\n                                isDropEle = ele.getAttribute('sn-drop') == 'true';\r\n                            };\r\n                        }\r\n                    };\r\n\r\n                    var moveElement = function (x, y) {\r\n                        // element.css();\r\n                    };\r\n\r\n                    var absorbEvent_ = function (event) {\r\n                        var e = event;//.originalEvent;\r\n                        e.preventDefault && e.preventDefault();\r\n                        e.stopPropagation && e.stopPropagation();\r\n                        e.cancelBubble = true;\r\n                        e.returnValue = false;\r\n                        return false;\r\n                    };\r\n\r\n                    initialize();\r\n                }\r\n            };\r\n        }])\r\n        .directive('snPreventDrag', ['$parse', '$timeout', function ($parse, $timeout) {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    var initialize = function () {\r\n\r\n                        element.attr('draggable', 'false');\r\n                        toggleListeners(true);\r\n                    };\r\n\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        // remove listeners\r\n\r\n                        if (!enable) return;\r\n                        // add listeners.\r\n                        element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                    };\r\n\r\n\r\n                    var absorbEvent_ = function (event) {\r\n                        var e = event.originalEvent;\r\n                        e.preventDefault && e.preventDefault();\r\n                        e.stopPropagation && e.stopPropagation();\r\n                        e.cancelBubble = true;\r\n                        e.returnValue = false;\r\n                        return false;\r\n                    };\r\n\r\n                    initialize();\r\n                }\r\n            };\r\n        }])\r\n        .directive('snCancelDrag', [function () {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    element.find('*').attr('sn-cancel-drag', 'sn-cancel-drag');\r\n                }\r\n            };\r\n        }])\r\n        .directive('snDragScroll', ['$window', '$interval', '$timeout', '$document', '$rootScope', function ($window, $interval, $timeout, $document, $rootScope) {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    var intervalPromise = null;\r\n                    var lastMouseEvent = null;\r\n\r\n                    var config = {\r\n                        verticalScroll: attrs.verticalScroll || true,\r\n                        horizontalScroll: attrs.horizontalScroll || true,\r\n                        activationDistance: attrs.activationDistance || 75,\r\n                        scrollDistance: attrs.scrollDistance || 15\r\n                    };\r\n\r\n\r\n                    var reqAnimFrame = (function () {\r\n                        return window.requestAnimationFrame ||\r\n                            window.webkitRequestAnimationFrame ||\r\n                            window.mozRequestAnimationFrame ||\r\n                            window.oRequestAnimationFrame ||\r\n                            window.msRequestAnimationFrame ||\r\n                            function ( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\r\n                                window.setTimeout(callback, 1000 / 60);\r\n                            };\r\n                    })();\r\n\r\n                    var animationIsOn = false;\r\n                    var createInterval = function () {\r\n                        animationIsOn = true;\r\n\r\n                        function nextFrame(callback) {\r\n                            var args = Array.prototype.slice.call(arguments);\r\n                            if (animationIsOn) {\r\n                                reqAnimFrame(function () {\r\n                                    $rootScope.$apply(function () {\r\n                                        callback.apply(null, args);\r\n                                        nextFrame(callback);\r\n                                    });\r\n                                })\r\n                            }\r\n                        }\r\n\r\n                        nextFrame(function () {\r\n                            if (!lastMouseEvent) return;\r\n\r\n                            var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n                            var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n\r\n                            var scrollX = 0;\r\n                            var scrollY = 0;\r\n\r\n                            if (config.horizontalScroll) {\r\n                                // If horizontal scrolling is active.\r\n                                if (lastMouseEvent.clientX < config.activationDistance) {\r\n                                    // If the mouse is on the left of the viewport within the activation distance.\r\n                                    scrollX = -config.scrollDistance;\r\n                                }\r\n                                else if (lastMouseEvent.clientX > viewportWidth - config.activationDistance) {\r\n                                    // If the mouse is on the right of the viewport within the activation distance.\r\n                                    scrollX = config.scrollDistance;\r\n                                }\r\n                            }\r\n\r\n                            if (config.verticalScroll) {\r\n                                // If vertical scrolling is active.\r\n                                if (lastMouseEvent.clientY < config.activationDistance) {\r\n                                    // If the mouse is on the top of the viewport within the activation distance.\r\n                                    scrollY = -config.scrollDistance;\r\n                                }\r\n                                else if (lastMouseEvent.clientY > viewportHeight - config.activationDistance) {\r\n                                    // If the mouse is on the bottom of the viewport within the activation distance.\r\n                                    scrollY = config.scrollDistance;\r\n                                }\r\n                            }\r\n\r\n\r\n\r\n                            if (scrollX !== 0 || scrollY !== 0) {\r\n                                // Record the current scroll position.\r\n                                var currentScrollLeft = ($window.pageXOffset || $document[0].documentElement.scrollLeft);\r\n                                var currentScrollTop = ($window.pageYOffset || $document[0].documentElement.scrollTop);\r\n\r\n                                // Remove the transformation from the element, scroll the window by the scroll distance\r\n                                // record how far we scrolled, then reapply the element transformation.\r\n                                var elementTransform = element.css('transform');\r\n                                element.css('transform', 'initial');\r\n\r\n                                $window.scrollBy(scrollX, scrollY);\r\n\r\n                                var horizontalScrollAmount = ($window.pageXOffset || $document[0].documentElement.scrollLeft) - currentScrollLeft;\r\n                                var verticalScrollAmount = ($window.pageYOffset || $document[0].documentElement.scrollTop) - currentScrollTop;\r\n\r\n                                element.css('transform', elementTransform);\r\n\r\n                                lastMouseEvent.pageX += horizontalScrollAmount;\r\n                                lastMouseEvent.pageY += verticalScrollAmount;\r\n\r\n                                $rootScope.$emit('draggable:_triggerHandlerMove', lastMouseEvent);\r\n                            }\r\n\r\n                        });\r\n                    };\r\n\r\n                    var clearInterval = function () {\r\n                        animationIsOn = false;\r\n                    };\r\n\r\n                    scope.$on('draggable:start', function (event, obj) {\r\n                        // Ignore this event if it's not for this element.\r\n                        if (obj.element[0] !== element[0]) return;\r\n\r\n                        if (!animationIsOn) createInterval();\r\n                    });\r\n\r\n                    scope.$on('draggable:end', function (event, obj) {\r\n                        // Ignore this event if it's not for this element.\r\n                        if (obj.element[0] !== element[0]) return;\r\n\r\n                        if (animationIsOn) clearInterval();\r\n                    });\r\n\r\n                    scope.$on('draggable:move', function (event, obj) {\r\n                        // Ignore this event if it's not for this element.\r\n                        if (obj.element[0] !== element[0]) return;\r\n\r\n                        lastMouseEvent = obj.event;\r\n                    });\r\n                }\r\n            };\r\n        }]);\r\n\r\n}\r\n"]}