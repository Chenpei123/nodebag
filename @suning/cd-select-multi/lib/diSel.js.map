{"version":3,"sources":["../src/diSel.js"],"names":["app","directive","restrict","template","scope","selData","selSelected","selEight","link","$scope","element","attrs","sel","dom","querySelector","config","multi","placeHolder","addEventListener","$apply","$watch","newData","oldData","update","data","selected_all","data_sel","del","d","i","length","id","len","j","pop"],"mappings":"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","file":"diSel.js","sourcesContent":["import Select from './select'\r\nexport default function (app) {\r\n    app.directive('cdSel', [function () {\r\n        return {\r\n            restrict: 'E',\r\n            template: `<select></select>`,\r\n            scope: {\r\n                selData: '=',\r\n                selSelected: '=',\r\n                selEight: '&'\r\n            },\r\n            link: function link($scope, element, attrs) {\r\n                let sel = new Select({\r\n                    dom: element[0].querySelector('select'),\r\n                    config: {\r\n                        multi: false,\r\n                        selEight: $scope.selEight,\r\n                        placeHolder: '请选择'\r\n                    }\r\n                })\r\n\r\n                element[0].addEventListener('selectj:selected', e => {\r\n                    $scope.$apply()\r\n                })\r\n\r\n                $scope.$watch('selData', (newData, oldData) => {\r\n                    newData && sel.update({\r\n                        data: newData\r\n                    })\r\n                })\r\n\r\n                $scope.$watch('selSelected', (newData, oldData) => {\r\n                    if (sel.selected_all === newData) return\r\n                    newData && sel.update({\r\n                        data_sel: $scope.selSelected\r\n                    })\r\n                })\r\n            }\r\n        };\r\n    }]);\r\n    app.directive('cdSelMulti', [function () {\r\n        return {\r\n            restrict: 'E',\r\n            template: `<div class=\"sel-mem\">\r\n                            <div class=\"sel-mem-left\">\r\n                                <div class=\"sel-pare\">\r\n                                    <select>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"sel-mem-right\">\r\n                                <span class=\"wrap\" ng-repeat=\"d in selSelected\">\r\n                                    <span class=\"wrap-name\">{{d.text || d.name}}</span>\r\n                                    <i class=\"fa fa-times-circle\" aria-hidden=\"true\" ng-click=\"del(d)\"></i>\r\n                                </span>\r\n                            </div>\r\n                        </div>`,\r\n            scope: {\r\n                selData: '=',\r\n                selSelected: '=',\r\n                selEight: '&'\r\n            },\r\n            link: function link($scope, element, attrs) {\r\n                let sel = new Select({\r\n                    dom: element[0].querySelector('.sel-pare select'),\r\n                    config: {\r\n                        multi: true,\r\n                        selEight: $scope.selEight\r\n                    }\r\n                })\r\n\r\n                element[0].addEventListener('selectj:selected', e => {\r\n                    $scope.$apply()\r\n                })\r\n\r\n                $scope.del = function (d) {\r\n                    for (let i = 0; i < $scope.selSelected.length; i++) {\r\n                        if ($scope.selSelected[i].id === d.id) {\r\n                            let len = $scope.selSelected.length - 1\r\n                            for (let j = i; j < len; j++) {\r\n                                $scope.selSelected[j] = $scope.selSelected[j + 1]\r\n                            }\r\n                            $scope.selSelected.pop()\r\n                        }\r\n                    }\r\n                }\r\n\r\n                $scope.$watch('selData', (newData, oldData) => {\r\n                    newData && sel.update({\r\n                        data: newData\r\n                    })\r\n                })\r\n\r\n                $scope.$watch('selSelected', (newData, oldData) => {\r\n                    if (sel.selected_all === newData) return\r\n                    newData && sel.update({\r\n                        data_sel: newData\r\n                    })\r\n                })\r\n            }\r\n        };\r\n    }]);\r\n}"]}