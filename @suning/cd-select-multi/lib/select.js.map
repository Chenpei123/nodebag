{"version":3,"sources":["../src/select.js"],"names":["Selectj","dom","data","data_sel","config","initDom","initData","selectj_wrap","addEventListener","e","stopImmediatePropagation","target","matches","closeAllOtherDropdown","debounce","toggleDropdown","selected","_data","find","n","id","dataset","closeDropdown","document","allOtherDropdownHandler","selectj_input","inputEvent","_data_sel","data_all","_data_100","slice","style","display","dom_wrap","parentNode","tpl_select","frag_select","createRange","createContextualFragment","appendChild","tpl_dropdown","frag_dropdown","querySelector","selectj_value","selectj_options","selectData","arr","length","forEach","Array","prototype","call","selectj_lis","classList","add","update","event","CustomEvent","bubbles","detail","dispatchEvent","arr_all","i","text","match","value","push","selEight","num","then","d","finally","data_isSearch","closeInputEvent","fn","forbidden","self","setTimeout","apply","arguments","options","el","r","getAttribute","v","selectj_ul","innerHTML","reduce","x","y","selected_all","querySelectorAll","multi","remove","select","textContent","pop","placeHolder","trim","_config"],"mappings":"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","file":"select.js","sourcesContent":["import './select.css'\r\nexport default class Selectj {\r\n    constructor({\r\n        dom,\r\n        data = [],\r\n        data_sel = [],\r\n        config\r\n    }) {\r\n        this.initDom(dom)\r\n        this.initData(data, data_sel, config)\r\n\r\n        this.selectj_wrap.addEventListener('click', e => {\r\n            e.stopImmediatePropagation()\r\n            if (e.target.matches('.value-wrap,.selected-value')) {\r\n                this.closeAllOtherDropdown()\r\n                this.debounce(this.toggleDropdown)()\r\n            }\r\n            if (e.target.matches('.drop-down ul li')) {\r\n                this.selected = this._data.find(n => n.id + '' === e.target.dataset.id + '')\r\n                this.closeDropdown()\r\n            }\r\n        }, false)\r\n        document.addEventListener('click', e => this.closeDropdown(), false)\r\n        document.addEventListener('selectj:close-all', e => this.allOtherDropdownHandler(e), false)\r\n        this.selectj_input.addEventListener('input', e => this.inputEvent(e), false)\r\n    }\r\n\r\n    initData(data, data_sel, config) {\r\n        config && (this.config = config);\r\n        data_sel && (this._data_sel = data_sel);\r\n        if (data) {\r\n            this._data = []\r\n            this.data_all = data\r\n            this.data = this._data_100 = data.slice(0, 100)\r\n            this.data = this.data\r\n        }\r\n    }\r\n\r\n    initDom(dom) {\r\n        this.dom = dom\r\n        this.dom.style.display = 'none'\r\n        this.dom_wrap = dom.parentNode\r\n        let tpl_select = `<span class=\"selectj-wrap\">\r\n                                <span class=\"value-wrap\">\r\n                                    <span class=\"selected-value\"><span>\r\n                                </span>\r\n                            </span>`\r\n        let frag_select = document.createRange().createContextualFragment(tpl_select)\r\n        this.dom_wrap.appendChild(frag_select)\r\n\r\n        let tpl_dropdown = `<span class=\"selectj-options\" style=\"display:none;\">\r\n                                <span class=\"drop-down\">\r\n                                    <span class=\"input-wrap\">\r\n                                        <input type=\"text\" spellcheck=\"false\">\r\n                                    </span>\r\n                                    <ul></ul>\r\n                                </span>\r\n                            </span>`\r\n        let frag_dropdown = document.createRange().createContextualFragment(tpl_dropdown)\r\n        this.selectj_wrap = this.dom_wrap.querySelector('.selectj-wrap')\r\n        this.selectj_wrap.appendChild(frag_dropdown)\r\n\r\n        this.selectj_value = this.selectj_wrap.querySelector('.selected-value')\r\n        this.selectj_options = this.selectj_wrap.querySelector('.selectj-options')\r\n        this.selectj_input = this.selectj_wrap.querySelector('.input-wrap input')\r\n    }\r\n\r\n    get data() {\r\n        if (this._data.length === 0) {\r\n            this.dom.options && Array.prototype.forEach.call(this.dom.options, (el) => {\r\n                let r = {\r\n                    id: el.getAttribute('value'),\r\n                    text: el.text,\r\n                }\r\n                this._data.push(r)\r\n                this._data_sel.push(r)\r\n            })\r\n        }\r\n        return this._data\r\n    }\r\n\r\n    set data(v) {\r\n        if (!v) return\r\n        this._data = v\r\n        this.selectj_ul.innerHTML = this._data.reduce((x, y) => {\r\n            return `${x}<li data-id=\"${y.id}\">${y.text}</li>`\r\n        }, '')\r\n        if (this.selectj_ul.innerHTML === '') {\r\n            if (this.data_isSearch) {\r\n                this.selectj_ul.innerHTML = `<li class=\"no-result\">查找中...</li>`\r\n            } else {\r\n                this.selectj_ul.innerHTML = `<li class=\"no-result\">没有匹配的结果</li>`\r\n            }\r\n        }\r\n        this.selected_all = this.selected_all\r\n    }\r\n\r\n    get selectj_ul() {\r\n        return this.selectj_options.querySelector('ul')\r\n    }\r\n\r\n    get selectj_lis() {\r\n        return this.selectj_ul.querySelectorAll('li')\r\n    }\r\n\r\n    set selected(d) {\r\n        if (!this.config.multi) {\r\n            Array.prototype.forEach.call(this.selectj_lis, e => {\r\n                e.classList.remove('selected')\r\n            })\r\n\r\n            this.data.forEach(e => {\r\n                if (e.id === d.id) {\r\n                    this.select = [e]\r\n                    this.selectj_value.textContent = e.text\r\n                }\r\n            })\r\n            this._data_sel.pop()\r\n            this._data_sel.push(d)\r\n            this.selectData([d]);\r\n        } else {\r\n            this.selectj_value.textContent = this.config.placeHolder\r\n            let r = this._data_sel.find(n => n.id + '' === d.id + '')\r\n            if (!r) {\r\n                this._data_sel.push(d)\r\n            }\r\n            this.selectData([d])\r\n        }\r\n\r\n        let event = new CustomEvent('selectj:selected', {\r\n            bubbles: true,\r\n            detail: d\r\n        })\r\n        this.dom.dispatchEvent(event)\r\n    }\r\n\r\n    get selected_all() {\r\n        return this._data_sel\r\n    }\r\n\r\n    set selected_all(arr = []) {\r\n        if (!this.config.multi) {\r\n            this.selectj_value.textContent = this.selectj_value.textContent.trim() ? this.selectj_value.textContent : this.config.placeHolder;\r\n            Array.prototype.forEach.call(this.selectj_lis, e => {\r\n                e.classList.remove('selected')\r\n            })\r\n\r\n            if (arr.length) {\r\n                this.data.forEach(e => {\r\n                    if (e.id === arr[0].id) {\r\n                        this.select = [e]\r\n                        this.selectj_value.textContent = e.text\r\n                    }\r\n                })\r\n                this._data_sel = arr\r\n                this.selectData([arr[0]])\r\n            }\r\n        } else {\r\n            this.selectj_value.textContent = this.config.placeHolder\r\n            this._data_sel = arr\r\n            this.selectData(arr)\r\n        }\r\n    }\r\n\r\n    selectData(arr) {\r\n        arr.length && arr.forEach(e => {\r\n            Array.prototype.forEach.call(this.selectj_lis, n => {\r\n                if (n.dataset.id === '' + e.id) {\r\n                    n.classList.add('selected')\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    update({\r\n        data,\r\n        data_sel,\r\n        config\r\n    }) {\r\n        this.initData(data, data_sel, config)\r\n    }\r\n\r\n    get config() {\r\n        return this._config\r\n    }\r\n\r\n    set config(config) {\r\n        this._config = config ? config : {\r\n            placeHolder: '请输入姓名或工号',\r\n            multi: false\r\n        }\r\n        if (config) {\r\n            this.config.placeHolder = config.placeHolder ? config.placeHolder : '请输入姓名或工号'\r\n        }\r\n    }\r\n\r\n    closeAllOtherDropdown() {\r\n        let event = new CustomEvent('selectj:close-all', {\r\n            bubbles: true,\r\n            detail: this.dom\r\n        })\r\n        this.dom.dispatchEvent(event)\r\n    }\r\n\r\n    allOtherDropdownHandler(e) {\r\n        if (e.detail !== this.dom) {\r\n            this.closeDropdown()\r\n        }\r\n    }\r\n\r\n    toggleDropdown() {\r\n        if (this.selectj_options.style.display) {\r\n            this.selectj_options.style.display = ''\r\n        } else {\r\n            this.selectj_options.style.display = 'none'\r\n        }\r\n    }\r\n\r\n    inputEvent(e) {\r\n        let arr = [],\r\n            arr_all = this.data_all\r\n        for (let i = 0; i < this.data_all.length; i++) {\r\n            if (arr_all[i].text.match(e.target.value)) {\r\n                arr.push(arr_all[i])\r\n                if (arr.length >= 100) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        //输入8位工号后的回调\r\n        if (arr.length === 0 && e.target.value.length >= 8) {\r\n            this.config.selEight({\r\n                num: e.target.value\r\n            }).then(d => {\r\n                this.data = d\r\n            }).finally(d => {\r\n                this.data_isSearch = false\r\n            })\r\n            this.data_isSearch = true\r\n        }\r\n\r\n        if (e.target.value.length >= 8) {\r\n            this.data = [arr[0]] //8位时去重\r\n        } else {\r\n            this.data = arr\r\n        }\r\n    }\r\n\r\n    closeInputEvent() {\r\n        this.data = this._data_100\r\n    }\r\n\r\n    closeDropdown() {\r\n        this.selectj_input.value = ''\r\n        this.closeInputEvent()\r\n        this.selectj_options.style.display = 'none'\r\n    }\r\n\r\n    debounce(fn) {\r\n        let forbidden = false,\r\n            self = this\r\n\r\n        return function() {\r\n            if (forbidden)\r\n                return\r\n\r\n            forbidden = true\r\n            setTimeout(() => forbidden = false, 300)\r\n            fn.apply(self, arguments)\r\n        }\r\n    }\r\n}"]}